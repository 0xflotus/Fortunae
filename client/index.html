<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!-- <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    /> -->
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;400;500;700&display=swap");
    </style>
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <title>Fortunae</title>
  </head>
  <body>
    <script
      type="text/javascript"
      src="https://mbostock.github.com/d3/d3.js?2.5.0"
    ></script>
    <nav>Menu</nav>
    <div class="container">
      <div class="top">
      <section>
        <div class="section-container">
          <header>Current Funds</header>
          <ul id="item-list"></ul>
        </div>
      </section>
      <section>
        <header>Monthly Expenses</header>
        <ul>
          <li>Checking: $2100</li>
          <li>Saving: $8900</li>
          <li>401K: $18000</li>
          <li>Index Funds: $7900</li>
        </ul>
        <button>Add Fund [+]</button>
        <div class="rectangle"><div class="inner-rectangle"></div></div>
      </section>
      <section>
        <header>Debt Calculator</header>
        <ul>
          <li>Checking: $2100</li>
          <li>Saving: $8900</li>
          <li>401K: $18000</li>
          <li>Index Funds: $7900</li>
        </ul>
        <button>Add Fund [+]</button>
        <div class="rectangle"><div class="inner-rectangle"></div></div>
      </section>
      <section>
        <header>Savings Calculator</header>
        <ul>
          <li>Checking: $2100</li>
          <li>Saving: $8900</li>
          <li>401K: $18000</li>
          <li>Index Funds: $7900</li>
        </ul>
        <button>Add Fund [+]</button>
        <div class="rectangle"><div class="inner-rectangle"></div>
      </section>
    </div>
    <div class="middle">
      <section>
        <header>Recommendations</header>
        <ul>
          <li>Checking: $2100</li>
          <li>Saving: $8900</li>
          <li>401K: $18000</li>
          <li>Index Funds: $7900</li>
        </ul>
      </section>
      <section style="display: none;">
        <div class="form-container hidden">
          <form id="item-form">
            <div class="form-group">
              <label for="title"></label>
              <input type="text" id="title" class="form-control" />
            </div>
            <div class="form-group">
              <input type="text" id="amount" class="form-control" />
            </div>
            <input type="submit" class="add-item" value="Add Item [+]" />
          </form>
        </div>
      </section>
      <section class="chart">
        <div class="chart-outer">
          <header>Trend Data</header>
          <div class="chart-inner">
            <div id="line"></div>
          </div> â€‹
        </div>
      </section>
      <section class="bordered">
        <header>Needs</header>
        <ul>
          <li>Checking: $2100</li>
          <li>Saving: $8900</li>
          <li>401K: $18000</li>
          <li>Index Funds: $7900</li>
        </ul>
        <sub>Wants</sub>
        <ul>
          <li>Checking: $2100</li>
          <li>Saving: $8900</li>
          <li>401K: $18000</li>
          <li>Index Funds: $7900</li>
        </ul>
      </section>
    </div>
  <footer>
    <header>History</header>
    <svg version="1.1" id="line" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1200px" height="5px" xml:space="preserve">
      <path class="path" fill="#ffffff" stroke-width="3" stroke="#FFFFFF" d="M0 0 l1120 0"/>
    </svg>
  </footer>
  </div>
    <!-- You can also require other files to run in this process -->
    <script src="./js/app.js"></script>
    <script>
      var svg = d3
        .select("#line")
        .append("svg:svg")
        .attr("width", "100%")
        .attr("height", "100%");
      var data = d3.range(50).map(function () {
        return Math.random() * 10;
      });
      var x = d3.scale.linear().domain([0, 10]).range([0, 700]);
      var y = d3.scale.linear().domain([0, 10]).range([10, 290]);
      var line = document.querySelector("#line");
      var line = d3.svg
        .line()
        .interpolate("cardinal")
        .x(function (d, i) {
          return x(i);
        })
        .y(function (d) {
          return y(d);
        });

      var path = svg.append("svg:path").attr("d", line(data));
      var circle = svg
        .append("circle")
        .attr("cx", 100)
        .attr("cy", 350)
        .attr("r", 6)
        .attr("fill", "white");

      var pathEl = path.node();
      var pathLength = pathEl.getTotalLength();
      var BBox = pathEl.getBBox();
      var scale = pathLength / BBox.width;
      var offsetLeft = document.getElementById("line").offsetLeft;
      var randomizeButton = d3.select("button");

      svg.on("mousemove", function () {
        var x = d3.event.pageX - offsetLeft;
        var beginning = x,
          end = pathLength,
          target;
        while (true) {
          target = Math.floor((beginning + end) / 2);
          pos = pathEl.getPointAtLength(target);
          if ((target === end || target === beginning) && pos.x !== x) {
            break;
          }
          if (pos.x > x) end = target;
          else if (pos.x < x) beginning = target;
          else break; //position found
        }
        circle.attr("opacity", 1).attr("cx", x).attr("cy", pos.y);
      });
    </script>
  </body>
</html>
